use shopDB                                    // 1️⃣ Create / switch database
db.products.insertMany([                      // 2️⃣ Sample data
  {name:"Pen", category:"Stationery", price:10},
  {name:"Pencil", category:"Stationery", price:5},
  {name:"Book", category:"Stationery", price:50},
  {name:"Mouse", category:"Electronics", price:500}
])

db.products.createIndex({category:1})         // 3️⃣ Indexing on category (Ascending)
db.products.getIndexes()                      // 4️⃣ Show created indexes

db.products.aggregate([                       // 5️⃣ Aggregation: average price by category
  { $group: { _id:"$category", avgPrice:{ $avg:"$price" } } }
])

var map = function() { emit(this.category, this.price); };    // 6️⃣ MapReduce example
var reduce = function(key, values) { return Array.sum(values); };
db.products.mapReduce(map, reduce, { out: "total_price" })    // 7️⃣ Output to new collection
db.total_price.find()                                         // 8️⃣ View MapReduce results
